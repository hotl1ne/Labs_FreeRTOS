# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ1: –í—Å—Ç—É–ø –¥–æ FreeRTOS —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∑–∞–¥–∞—á–∞–º–∏

–¶–µ–π –ø—Ä–æ—î–∫—Ç —î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ "–û–ø–µ—Ä–∞—Ü—ñ–π–Ω—ñ —Å–∏—Å—Ç–µ–º–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É". –ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏ ‚Äî –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ä–æ–∑—Ä–æ–±–∫–∏ FreeRTOS –Ω–∞ Windows (—Å–∏–º—É–ª—è—Ç–æ—Ä WIN32), —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–∏—Ö –∑–∞–¥–∞—á —Ç–∞ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –≤–ø–ª–∏–≤—É –∫–≤–∞–Ω—Ç—É–≤–∞–Ω–Ω—è —á–∞—Å—É (Time Slicing) –Ω–∞ –¥–∂–∏—Ç–µ—Ä.

## üìã –û–ø–∏—Å –∑–∞–≤–¥–∞–Ω–Ω—è

–ü—Ä–æ–≥—Ä–∞–º–∞ —Å—Ç–≤–æ—Ä—é—î —Ç—Ä–∏ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ –∑–∞–¥–∞—á—ñ ($\tau_1, \tau_2, \tau_3$) –∑ –Ω–µ–≥–∞—Ä–º–æ–Ω—ñ—á–Ω–∏–º–∏ –ø–µ—Ä—ñ–æ–¥–∞–º–∏. –ö–æ–∂–Ω–∞ –∑–∞–¥–∞—á–∞ —ñ–º—ñ—Ç—É—î –∫–æ—Ä–∏—Å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (CPU load) —á–µ—Ä–µ–∑ –∞–∫—Ç–∏–≤–Ω–µ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è (busy loop) —Ç–∞ –ª–æ–≥—É—î —á–∞—Å –ø–æ—á–∞—Ç–∫—É —ñ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–≤–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤–∞—Ä—ñ–∞–Ω—Ç—É
**–ù–æ–º–µ—Ä –≤–∞—Ä—ñ–∞–Ω—Ç—É (ID):** [–í–ê–® –ù–û–ú–ï–† –í–ê–†–Ü–ê–ù–¢–£]  
**–ü—Ä–µ—Ñ—ñ–∫—Å —ñ–º–µ–Ω –∑–∞–¥–∞—á:** `[KU]``[IM]`_ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `KUPR_`)

–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –∑–∞–¥–∞—á –∑–≥—ñ–¥–Ω–æ –∑ —Ñ–æ—Ä–º—É–ª–∞–º–∏:
* $T_i$ ‚Äî –ø–µ—Ä—ñ–æ–¥ –∑–∞–¥–∞—á—ñ (ms)
* $C_i$ ‚Äî —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (ms)

| –ó–∞–¥–∞—á–∞ ($\tau$) | –§–æ—Ä–º—É–ª–∞ –ø–µ—Ä—ñ–æ–¥—É ($T$) | –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–µ $T$ (ms) | –§–æ—Ä–º—É–ª–∞ —á–∞—Å—É ($C$) | –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–µ $C$ (ms) | –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **$\tau_1$** | $13 + (ID \pmod 7)$ | **[–ó–ù–ê–ß–ï–ù–ù–Ø]** | $2 + (ID \pmod 3)$ | **[–ó–ù–ê–ß–ï–ù–ù–Ø]** | [–í–∏—Å–æ–∫–∏–π/–ù–∏–∑—å–∫–∏–π] |
| **$\tau_2$** | $21 + (ID \pmod 5)$ | **[–ó–ù–ê–ß–ï–ù–ù–Ø]** | $3 + ((ID/3) \pmod 3)$ | **[–ó–ù–ê–ß–ï–ù–ù–Ø]** | [–í–∏—Å–æ–∫–∏–π/–ù–∏–∑—å–∫–∏–π] |
| **$\tau_3$** | $34 + (ID \pmod 9)$ | **[–ó–ù–ê–ß–ï–ù–ù–Ø]** | $4 + ((ID/5) \pmod 3)$ | **[–ó–ù–ê–ß–ï–ù–ù–Ø]** | [–ù–∏–∑—å–∫–∏–π] |

*(–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–æ –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º: —è–∫—â–æ $(ID \pmod 2) == 0 \rightarrow \tau_1 > \tau_2 > \tau_3$, —ñ–Ω–∞–∫—à–µ $\tau_2 > \tau_1 > \tau_3$)*

## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω—ñ –≤–∏–º–æ–≥–∏ —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

* **IDE:** Visual Studio 2019/2022
* **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** FreeRTOS Windows Simulator (WIN32-MSVC)
* **–ú–æ–≤–∞:** C

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç

1.  **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:**
    ```bash
    git clone <–ø–æ—Å–∏–ª–∞–Ω–Ω—è-–Ω–∞-–≤–∞—à-repo>
    cd <–ø–∞–ø–∫–∞-repo>
    ```

2.  **–í—ñ–¥–∫—Ä–∏—Ç—Ç—è —É Visual Studio:**
    * –ó–∞–ø—É—Å—Ç—ñ—Ç—å Visual Studio.
    * –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª —Ä—ñ—à–µ–Ω–Ω—è: `FreeRTOS/Demo/WIN32-MSVC/WIN32.sln`.

3.  **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø—É—Å–∫—É:**
    * –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É —Ñ–∞–π–ª—ñ `main.c` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Å–∞–º–µ —Ñ—É–Ω–∫—Ü—ñ—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ (–∞–±–æ –∫–æ–¥ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π —É `main.c`).
    * –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø—Ä–æ—î–∫—Ç `RTOSDemo` —è–∫ —Å—Ç–∞—Ä—Ç–æ–≤–∏–π (Right click -> Set as Startup Project).

4.  **–ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ç–∞ –∑–∞–ø—É—Å–∫:**
    * –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `Build` -> `Build Solution` (–∞–±–æ `Ctrl+Shift+B`).
    * –ó–∞–ø—É—Å—Ç—ñ—Ç—å –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–æ—é `Local Windows Debugger` (–∞–±–æ `F5`).

## ‚öôÔ∏è –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞—á—ñ
–ö–æ–∂–Ω–∞ –∑–∞–¥–∞—á–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —à–∞–±–ª–æ–Ω–æ–º:

```c
void vPeriodicTask(void *pvParameters) {
    TickType_t xLastWakeTime = xTaskGetTickCount();
    const TickType_t xFrequency = pdMS_TO_TICKS(MY_PERIOD_MS);

    for(;;) {
        vTaskDelayUntil(&xLastWakeTime, xFrequency);

        printf("Task Start: %u\n", xTaskGetTickCount());

        BusyWait(MY_EXECUTION_TIME_MS);

        // 4. –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
        printf("Task End: %u\n", xTaskGetTickCount());
    }
}
