# –õ–ê–ë–û–†–ê–¢–û–†–ù–ê –†–û–ë–û–¢–ê ‚Ññ3: –ß–µ—Ä–≥–∏ (Queues) —É FreeRTOS

### **–ú–µ—Ç–∞ –†–æ–±–æ—Ç–∏**

–û–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —ñ–∑ –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º —á–µ—Ä–≥ —É FreeRTOS —è–∫ –∑–∞—Å–æ–±–æ–º –≤–∑–∞—î–º–æ–¥—ñ—ó –º—ñ–∂ –∑–∞–¥–∞—á–∞–º–∏. [cite_start]–ù–∞–≤—á–∏—Ç–∏—Å—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —á–µ—Ä–≥–∏, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –¥–∞–Ω—ñ, –æ–±—Ä–æ–±–ª—è—Ç–∏ —Ç–∞–π–º-–∞—É—Ç–∏ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, —Ç–∞ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ –±–ª–æ–∫—É—é—á–∏–º–∏ –π –Ω–µ–±–ª–æ–∫—É—é—á–∏–º–∏ –≤–∏–∫–ª–∏–∫–∞–º–∏ API[cite: 3, 4].

### **–í–∞—Ä—ñ–∞–Ω—Ç –í–∏–∫–æ–Ω–∞–Ω–Ω—è: 4**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–Ω—è |
| :--- | :--- |
| **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–¥–∞—á** | [cite_start]2 (Producer, Consumer) [cite: 45] |
| **–¢–∏–ø –¥–∞–Ω–∏—Ö —É —á–µ—Ä–∑—ñ** | [cite_start]`char[16]` (–†—è–¥–æ–∫) [cite: 45] |
| **–¢–∞–π–º-–∞—É—Ç –≤—ñ–¥–ø—Ä–∞–≤–∫–∏** | [cite_start]100 –º—Å [cite: 45] |
| **–¢–∞–π–º-–∞—É—Ç –ø—Ä–∏–π–æ–º—É** | [cite_start]1000 –º—Å [cite: 45] |
| **–î–æ–¥–∞—Ç–∫–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è** | [cite_start]–ü–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —Ä—è–¥–∫–∏ ("Msg1", "Msg2", ...) [cite: 45] |

---

## üí° –û–ø–∏—Å –ü—Ä–æ—î–∫—Ç—É —Ç–∞ –ü—Ä–∏–Ω—Ü–∏–ø –†–æ–±–æ—Ç–∏

[cite_start]–ü—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î **–æ–±–º—ñ–Ω –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏** –º—ñ–∂ –¥–≤–æ–º–∞ –∑–∞–¥–∞—á–∞–º–∏ —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω—ñ–∑–º **—á–µ—Ä–≥ (Queues)** FreeRTOS[cite: 6].

–ß–µ—Ä–≥–∞ (—Ö–µ–Ω–¥–ª `qData`) –±—É–ª–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è 5 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –¥–µ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —î —Ä—è–¥–∫–æ–º —Ä–æ–∑–º—ñ—Ä–æ–º 16 –±–∞–π—Ç (`char[16]`).

### **–ó–∞–¥–∞—á—ñ —Ç–∞ –õ–æ–≥—ñ–∫–∞**

1.  **`vProducer` (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2)**
    * [cite_start]**–§—É–Ω–∫—Ü—ñ—è:** –§–æ—Ä–º—É—î –¥–∞–Ω—ñ (–ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ —Ä—è–¥–∫–∏ "Msg1", "Msg2" —ñ —Ç.–¥.) —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —ó—Ö —É —á–µ—Ä–≥—É[cite: 8, 22].
    * **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ—É–Ω–∫—Ü—ñ—é `xQueueSend()` –∑ **–±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º** –Ω–∞ **100 –º—Å**. –Ø–∫—â–æ —á–µ—Ä–≥–∞ –ø–æ–≤–Ω–∞, –∑–∞–¥–∞—á–∞ –±–ª–æ–∫—É—î—Ç—å—Å—è –Ω–∞ —Ü–µ–π —á–∞—Å, –æ—á—ñ–∫—É—é—á–∏ –≤—ñ–ª—å–Ω–æ–≥–æ —Å–ª–æ—Ç–∞.

2.  **`vConsumer` (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1)**
    * [cite_start]**–§—É–Ω–∫—Ü—ñ—è:** –ß–∏—Ç–∞—î –¥–∞–Ω—ñ –∑ —á–µ—Ä–≥–∏, –æ–±—Ä–æ–±–ª—è—î –π –ª–æ–≥—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç[cite: 8, 34].
    * **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ—É–Ω–∫—Ü—ñ—é `xQueueReceive()` –∑ **–±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º** –Ω–∞ **1000 –º—Å**. –Ø–∫—â–æ —á–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è, –∑–∞–¥–∞—á–∞ —á–µ–∫–∞—î –¥–æ –æ–¥–Ω—ñ—î—ó —Å–µ–∫—É–Ω–¥–∏ –Ω–∞ –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö. –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ —Ç–∞–π–º-–∞—É—Ç, —è–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ –∑–∞ —Ü–µ–π —á–∞—Å.

---

## üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —ñ–∑ –ó–∞–ø—É—Å–∫—É (WIN32-MingW)

–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î FreeRTOS Windows Simulator, —Ç–æ–º—É –ø–æ–≤–∏–Ω–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è —è–∫ –∫–æ–Ω—Å–æ–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ Win32.

### **1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É**

–ö–æ–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ **`main_lab3.c`** —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `Demo App Source/Full_Demo`).

### **2. –ó–∞–ø—É—Å–∫**

1.  –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ñ–∞–π–ª **`main_lab3.c`** –¥–æ–¥–∞–Ω–∏–π –¥–æ –ø—Ä–æ—î–∫—Ç—É, –∞ **—ñ–Ω—à—ñ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏** (—â–æ –º—ñ—Å—Ç—è—Ç—å `main` –∞–±–æ —ñ–Ω—à—ñ `main_...` —Ñ—É–Ω–∫—Ü—ñ—ó) –≤–∏–∫–ª—é—á–µ–Ω—ñ –∞–±–æ –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å `main_lab3()`.
2.  –°–∫–æ–º–ø—ñ–ª—é–π—Ç–µ –ø—Ä–æ—î–∫—Ç —É —Ä–µ–∂–∏–º—ñ **Win32** (Debug –∞–±–æ Release).
3.  –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–π —Ñ–∞–π–ª.

### **–û—á—ñ–∫—É–≤–∞–Ω–∏–π –í–∏–≤—ñ–¥**

–£ –∫–æ–Ω—Å–æ–ª—ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—ñ–¥ –æ–±–æ—Ö –∑–∞–¥–∞—á, —è–∫–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø–µ—Ä–µ–¥–∞—á—É —Ä—è–¥–∫—ñ–≤ —Ç–∞ —Å–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞–π–º-–∞—É—Ç—ñ–≤:
